<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core">

<!-- ==================================================================================================================================================================== -->
<ui:composition template="/template/modeloGeral.xhtml">
	<ui:define name="conteudo">
		<h:form id="usuario">
			<p:menubar
				rendered="#{session.getAttribute('usuarioLogado').nivel == 'SUPER'}">
				<p:submenu label="Usuario" icon="ui-icon-document">

					<p:menuitem value="Cadastrar"
						actionListener="#{usuarioBean.cadastrar()}"
						update=":cadastrarUsuario"
						onclick="PF('dlgCadastrarUsuario').show();" />
				</p:submenu>

				<p:submenu label="Igreja" icon="ui-icon-document">

					<p:menuitem value="Cadastrar" update="cadastrarIgreja"
						onclick="PF('dlgCadastrarIgreja').show();" />
				</p:submenu>



			</p:menubar>

		</h:form>

		<!-- ==================================================================================================================================================================== -->

		<p:dialog modal="true" appendTo="@(body)"
			widgetVar="dlgCadastrarUsuario" resizable="false" closable="true"
			closeOnEscape="true" width="600" height="250">

			<h:form id="cadastrarUsuario">

				<p:messages />
				<p:panel header="Cadastrar usuario"
					rendered="#{usuarioBean.ver eq true}">
					<p:panelGrid columns="2"
						columnClasses="ui-grid-col-2,ui-grid-col-10" layout="grid"
						styleClass="ui-panelgrid-blank;">

						<p:outputLabel value="Usuario:" />
						<p:inputText value="#{usuarioBean.usuario.usuario}"
							disabled="false" styleClass="ui-grid-col-4" />

						<p:outputLabel value="Senha:" />
						<p:inputText value="#{usuarioBean.usuario.senha}" disabled="false"
							styleClass="ui-grid-col-4" />

						<p:outputLabel value="Nivel:" />
						<p:selectOneMenu id='nivel' value="#{usuarioBean.usuario.nivel}">
							<f:selectItem itemLabel="selecione..." />
							<f:selectItem itemValue="ADMINISTRADOR" itemLabel="ADMINISTRADOR" />
							<f:selectItem itemValue="USUARIO" itemLabel="USUARIO" />
						</p:selectOneMenu>


						<h:outputLabel value="Igreja" />
						<h:selectOneMenu value="#{usuarioBean.usuario.igreja}"
							disabled="false">
							<f:selectItem itemValue="null" itemLabel="Sel. Igreja" />
							<f:selectItems value="#{usuarioBean.igrejas}" var="cl"
								itemValue="#{cl}" itemLabel="#{cl.nome}" />
						</h:selectOneMenu>
				
					</p:panelGrid>
				</p:panel>


				<p:toolbar>
					<f:facet name="right">
						<p:commandButton value="Confirmar" rendered="#{usuarioBean.ver eq true}"
							actionListener="#{usuarioBean.salvar()}" update="@form"/>

						<p:commandButton value="cancelar" update="@form"
							oncomplete="PF('dlgCadastrarUsuario').hide();" />
					</f:facet>
				</p:toolbar>


			</h:form>

		</p:dialog>

		<!-- ==================================================================================================================================================================== -->

		<p:dialog modal="true" appendTo="@(body)"
			widgetVar="dlgCadastrarIgreja" resizable="false" closable="true"
			closeOnEscape="true" width="1200" height="550">

			<h:form id="cadastrarIgreja">


				<p:toolbar>
					<f:facet name="right">
						<p:commandButton value="salvar"
							actionListener="#{usuarioBean.cadastrar()}" update="@form" />
					</f:facet>
				</p:toolbar>


			</h:form>

		</p:dialog>



	</ui:define>

</ui:composition>
</html>